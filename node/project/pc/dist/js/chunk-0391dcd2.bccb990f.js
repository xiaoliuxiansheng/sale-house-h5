(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0391dcd2"],{"289d":function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e.$createElement,l=e._self._c||a;return l("section",[l("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[l("el-form",{attrs:{inline:!0,model:e.filters}},[l("el-form-item",[l("el-input",{attrs:{placeholder:"大楼名称"},model:{value:e.filters.name,callback:function(a){e.$set(e.filters,"name",a)},expression:"filters.name"}})],1),l("el-form-item",[l("el-select",{attrs:{placeholder:"选择区域"},model:{value:e.value,callback:function(a){e.value=a},expression:"value"}},e._l(e.options,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),l("el-select",{attrs:{placeholder:"选择面积"},model:{value:e.parms.area,callback:function(a){e.$set(e.parms,"area",a)},expression:"parms.area"}},e._l(e.options2,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),l("el-select",{attrs:{placeholder:"选择价格"},model:{value:e.parms.price,callback:function(a){e.$set(e.parms,"price",a)},expression:"parms.price"}},e._l(e.options3,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.getUsers}},[e._v("查询")])],1)],1)],1),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.users,"highlight-current-row":""}},[l("el-table-column",{attrs:{prop:"subordinate",label:"所属楼盘",width:"auto"}}),l("el-table-column",{attrs:{prop:"area",label:"面积（m²）",width:"auto"}}),l("el-table-column",{attrs:{prop:"price",label:"价格元/m²·月",width:"auto"}}),l("el-table-column",{attrs:{prop:"describe",label:"描述","min-width":"auto"}}),l("el-table-column",{attrs:{prop:"addr",label:"房屋照片","min-width":"auto"},scopedSlots:e._u([{key:"default",fn:function(a){return e._l(a.row.houseimg,function(r,s){return a.row.houseimg.length>0?l("div",{staticClass:"avatarimg",staticStyle:{display:"inline-block"}},[s<1?l("img",{attrs:{src:r}}):e._e()]):l("div",[l("img",{attrs:{src:t("113c")}})])})}}])}),l("el-table-column",{attrs:{prop:"name",label:"业主姓名","min-width":"auto"}}),l("el-table-column",{attrs:{prop:"phone",label:"业主联系方式","min-width":"auto"}}),l("el-table-column",{attrs:{prop:"isexist",label:"是否出租","min-width":"auto"},scopedSlots:e._u([{key:"default",fn:function(a){return["Y"==a.row.isexist?l("span",[e._v("否")]):l("span",[e._v("是")])]}}])}),l("el-table-column",{attrs:{label:"操作",width:"auto"},scopedSlots:e._u([{key:"default",fn:function(a){return[l("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.handleDel(a.$index,a.row)}}},[e._v("删除")])]}}])})],1),l("el-col",{staticClass:"toolbar",attrs:{span:24}},[l("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":10,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),l("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(a){e.editFormVisible=a}}},[l("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.addFormRules}},[l("el-row",[l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"姓名",prop:"name"}},[l("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.name,callback:function(a){e.$set(e.addForm,"name",a)},expression:"addForm.name"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"性别",prop:"region"}},[l("el-radio-group",{model:{value:e.addForm.sex,callback:function(a){e.$set(e.addForm,"sex",a)},expression:"addForm.sex"}},[l("el-radio",{staticClass:"radio",attrs:{label:1}},[e._v("男")]),l("el-radio",{staticClass:"radio",attrs:{label:0}},[e._v("女")])],1)],1)],1)],1),l("el-row",[l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"年龄",prop:"age"}},[l("el-input-number",{attrs:{min:0,max:200},model:{value:e.addForm.age,callback:function(a){e.$set(e.addForm,"age",a)},expression:"addForm.age"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"电话",prop:"phone"}},[l("el-input",{attrs:{placeholder:"请输入电话",clearable:""},model:{value:e.addForm.phone,callback:function(a){e.$set(e.addForm,"phone",a)},expression:"addForm.phone"}})],1)],1)],1),l("el-form-item",{attrs:{label:"头像"}},[l("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?l("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):l("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),l("el-row",[l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"账号",prop:"num"}},[l("el-input",{attrs:{placeholder:"请输入账号",clearable:""},model:{value:e.addForm.num,callback:function(a){e.$set(e.addForm,"num",a)},expression:"addForm.num"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"密码",prop:"pwd"}},[l("el-input",{attrs:{placeholder:"请输入密码",clearable:""},model:{value:e.addForm.pwd,callback:function(a){e.$set(e.addForm,"pwd",a)},expression:"addForm.pwd"}})],1)],1)],1)],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{nativeOn:{click:function(a){e.editFormVisible=!1}}},[e._v("取消")]),l("el-button",{attrs:{type:"primary",loading:e.editLoading},nativeOn:{click:function(a){return e.editSubmit(a)}}},[e._v("提交")])],1)],1),l("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible,"close-on-click-modal":!1,width:"40%"},on:{"update:visible":function(a){e.addFormVisible=a}}},[l("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.addFormRules}},[l("el-row",[l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"姓名",prop:"name"}},[l("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.name,callback:function(a){e.$set(e.addForm,"name",a)},expression:"addForm.name"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"性别",prop:"region"}},[l("el-radio-group",{model:{value:e.addForm.sex,callback:function(a){e.$set(e.addForm,"sex",a)},expression:"addForm.sex"}},[l("el-radio",{staticClass:"radio",attrs:{label:1}},[e._v("男")]),l("el-radio",{staticClass:"radio",attrs:{label:0}},[e._v("女")])],1)],1)],1)],1),l("el-row",[l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"年龄",prop:"age"}},[l("el-input-number",{attrs:{min:0,max:200},model:{value:e.addForm.age,callback:function(a){e.$set(e.addForm,"age",a)},expression:"addForm.age"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"电话",prop:"phone"}},[l("el-input",{attrs:{placeholder:"请输入电话",clearable:""},model:{value:e.addForm.phone,callback:function(a){e.$set(e.addForm,"phone",a)},expression:"addForm.phone"}})],1)],1)],1),l("el-form-item",{attrs:{label:"头像"}},[l("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?l("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):l("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),l("el-row",[l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"账号",prop:"num"}},[l("el-input",{attrs:{placeholder:"请输入账号",clearable:""},model:{value:e.addForm.num,callback:function(a){e.$set(e.addForm,"num",a)},expression:"addForm.num"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"密码",prop:"pwd"}},[l("el-input",{attrs:{placeholder:"请输入密码",clearable:""},model:{value:e.addForm.pwd,callback:function(a){e.$set(e.addForm,"pwd",a)},expression:"addForm.pwd"}})],1)],1)],1)],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{nativeOn:{click:function(a){e.addFormVisible=!1}}},[e._v("取消")]),l("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(a){return e.addSubmit(a)}}},[e._v("提交")])],1)],1)],1)},r=[],s=(t("6b54"),t("06db"),t("5176")),o=t.n(s),i=(t("28a5"),t("7f7f"),t("8b55")),n=t("4ec3"),d={data:function(){return{filters:{name:""},options:[{value:"",label:"不限"},{value:"渝中区",label:"渝中区"},{value:"江北区",label:"江北区"},{value:"南岸区",label:"南岸区"},{value:"九龙坡区",label:"九龙坡区"},{value:"沙坪坝区",label:"沙坪坝区"},{value:"大渡口区",label:"大渡口区"},{value:"北碚区",label:"北碚区"},{value:"渝北区",label:"渝北区"},{value:"巴南区",label:"巴南区"},{value:"两江新区",label:"两江新区"}],options3:[{value:"",label:"不限"},{value:"0-50",label:"50元/m²·月以下"},{value:"50-80",label:"50-80元/m²·月"},{value:"80-100",label:"80-100元/m²·月"},{value:"100",label:"100元以上"}],options2:[{value:"",label:"不限"},{value:"0-100",label:"100m²以下"},{value:"100-200",label:"100-200m²"},{value:"200-300",label:"200-300m²"},{value:"300-500",label:"300-500m²"},{value:"500-800",label:"500-800m²"},{value:"800-1500",label:"800-1500m²"},{value:"1500",label:"1500以上"}],value:"",users:[],total:0,page:1,listLoading:!1,sels:[],editFormVisible:!1,editLoading:!1,editFormRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}]},editForm:{id:0,name:"",sex:-1,age:0,num:null,phone:null,pwd:null},addFormVisible:!1,addLoading:!1,addFormRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:5,message:"长度在 2 到 5 个字符",trigger:"blur"}],region:[{required:!0,message:"请选择性别",trigger:"change"}],age:[{required:!0,message:"输入年龄",trigger:"blur"}],phone:[{required:!0,message:"请输入联系方式",trigger:"blur"}],num:[{required:!0,message:"请输入账号",trigger:"blur"}],pwd:[{required:!0,message:"请输入密码",trigger:"blur"}]},addForm:{name:"",sex:-1,age:0,birth:"",addr:""},imageUrl:"",input:"",ruleForm:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},parms:{name:null,region:null,price:null,area:null,pageNo:null,rors:2}}},methods:{submitForm:function(e){this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;alert("submit!")})},resetForm:function(e){this.$refs[e].resetFields()},handleAvatarSuccess:function(e,a){this.imageUrl=URL.createObjectURL(a.raw)},beforeAvatarUpload:function(e){var a="image/jpeg"===e.type,t=e.size/1024/1024<2;return a||this.$message.error("上传头像图片只能是 JPG 格式!"),t||this.$message.error("上传头像图片大小不能超过 2MB!"),a&&t},formatSex:function(e,a){return 1===e.sex?"男":0===e.sex?"女":"未知"},handleCurrentChange:function(e){this.parms.pageNo=e,this.getUsers()},getUsers:function(){var e,a=this;this.page,this.filters.name;for(var t in this.listLoading=!0,e=new FormData,this.parms)this.parms[t]&&e.append(t,this.parms[t]);this.$axios.post("/house/list",e).then(function(e){"error"==e.data.code?a.$message({message:e.data.message,type:"warning"}):(console.log(e),a.total=e.data.data.totalRows,a.users=e.data.data.rows,a.users.forEach(function(e,t){a.users[t].houseimg=e.houseimg.split(",")}),console.log(a.users),a.listLoading=!1)})},handleDel:function(e,a){var t=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){t.listLoading=!0;var e=new FormData;e.append("id",a.pk_house),t.$axios.post("/house/del",e).then(function(e){t.listLoading=!1,"ok"==e.data.code?t.$message({message:"删除成功",type:"success"}):t.$message({message:e.data.message,type:"warning"}),t.getUsers()})}).catch(function(){})},handleEdit:function(e,a){this.editFormVisible=!0,this.editForm=o()({},a)},handleAdd:function(){this.addFormVisible=!0,this.addForm={name:"",sex:-1,age:0,birth:"",addr:""}},editSubmit:function(){var e=this;this.$refs.editForm.validate(function(a){a&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0;var a=o()({},e.editForm);a.birth=a.birth&&""!==a.birth?i["a"].formatDate.format(new Date(a.birth),"yyyy-MM-dd"):"",Object(n["c"])(a).then(function(a){e.editLoading=!1,e.$message({message:"提交成功",type:"success"}),e.$refs["editForm"].resetFields(),e.editFormVisible=!1,e.getUsers()})})})},addSubmit:function(){var e=this;this.$refs.addForm.validate(function(a){a&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.addLoading=!0;var a=o()({},e.addForm);a.birth=a.birth&&""!==a.birth?i["a"].formatDate.format(new Date(a.birth),"yyyy-MM-dd"):"",Object(n["a"])(a).then(function(a){e.addLoading=!1,e.$message({message:"提交成功",type:"success"}),e.$refs["addForm"].resetFields(),e.addFormVisible=!1,e.getUsers()})})})},selsChange:function(e){this.sels=e},batchRemove:function(){var e=this,a=this.sels.map(function(e){return e.id}).toString();this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(){e.listLoading=!0;var t={ids:a};Object(n["b"])(t).then(function(a){e.listLoading=!1,e.$message({message:"删除成功",type:"success"}),e.getUsers()})}).catch(function(){})}},mounted:function(){this.getUsers()}},u=d,m=(t("6269"),t("2877")),c=Object(m["a"])(u,l,r,!1,null,null,null);a["default"]=c.exports},6269:function(e,a,t){"use strict";var l=t("effc"),r=t.n(l);r.a},effc:function(e,a,t){}}]);
//# sourceMappingURL=chunk-0391dcd2.bccb990f.js.map